<!doctype html>
<html lang="ar" dir="rtl" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ููููุฏ ุงูุฎุทุงุจุงุช - ุฌูุนูุฉ ูุนุฑูุฉ</title>

  <!-- Local fonts (offline-friendly). Files live in assets/fonts/ -->
  <link rel="preload" as="font" type="font/ttf" href="assets/fonts/IBMPlexSansArabic-Regular.ttf" crossorigin>
  <link rel="preload" as="font" type="font/ttf" href="assets/fonts/IBMPlexSansArabic-Medium.ttf" crossorigin>
  <link rel="preload" as="font" type="font/ttf" href="assets/fonts/IBMPlexSansArabic-Bold.ttf" crossorigin>

  <link rel="icon" href="favicon.ico" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />

  <link rel="stylesheet" href="css/app.css" />
  <link rel="stylesheet" href="css/date-picker.css" />
  <link rel="stylesheet" href="css/signature.css" />
</head>

<body data-mobile-view="form">
  <header class="topbar" aria-label="ุดุฑูุท ุงูุฃุฏูุงุช">
    <div class="topbar__title">
      <div class="badge">A4</div>
      <div>
        <div class="title">ููููุฏ ุงูุฎุทุงุจุงุช</div>
        <div class="subtitle">ุฌูุนูุฉ ูุนุฑูุฉ</div>
      </div>
    </div>

    <div class="topbar__actions">
      <div class="mobileTabs" role="tablist" aria-label="ุงูุชููู">
        <button class="tab is-active" data-view="form" type="button">ุงููุฏุฎูุงุช</button>
        <button class="tab" data-view="preview" type="button">ุงููุนุงููุฉ</button>
      </div>

      <button class="btn btn--ghost" id="theme-toggle" type="button">
        <span class="theme-toggle-icon" aria-hidden="true"></span>
        <span class="theme-toggle-text"></span>
      </button>

      <button class="btn" id="btn-save" type="button">ุญูุธ</button>
      <button class="btn btn--ghost" id="btn-load" type="button">ุงุณุชุฑุฌุงุน</button>
      <button class="btn btn--primary" id="btn-export" type="button">ุชุตุฏูุฑ PDF</button>
    </div>
  </header>

  <main class="layout">
    <!-- FORM -->
    <section class="panel form" aria-label="ุงููุฏุฎูุงุช">
      <div class="section">
        <div class="section__title">ููุน ุงูุฎุทุงุจ</div>

        <label class="field">
          <span class="field__label">ููุน ุงูุฎุทุงุจ</span>
          <select id="letterType" class="field__control">
            <option value="general" selected>ุฎุทุงุจ ุนุงู</option>
            <option value="custody">ุทูุจ ุนูุฏุฉ ูุงููุฉ</option>
            <option value="close_custody">ุทูุจ ุฅุบูุงู ุนูุฏุฉ ูุงููุฉ</option>
          </select>
        </label>

        <label class="field">
          <span class="field__label">ุงูุชุงุฑูุฎ</span>
          <input id="date" type="hidden" />
          <input id="dateDisplay" class="field__control md3-text-field__input--date" placeholder=" " readonly />
          <span class="field__hint">ุงุฎุชุฑ ุชุงุฑูุฎูุง ูุงุญุฏูุง ูุณูุธูุฑ ูุฌุฑู/ูููุงุฏู ุชููุงุฆููุง</span>
        </label>
      </div>

      <div class="section" id="section-costcenter">
        <div class="section__title">ูุฑูุฒ ุงูุชูููุฉ</div>

        <div class="grid2">
          <label class="field">
            <span class="field__label">ูุฑูุฒ ุงูุชูููุฉ (Cost Center)</span>
            <select id="costCenter" class="field__control"></select>
            <span class="field__hint">ุงุฎุชูุงุฑ ูุฑูุฒ ุงูุชูููุฉ ูุบูู ุนู ุงูุฃููุงุฏ ุงูุชูุตูููุฉ ูุงุณู ุงููุดุฑูุน</span>
          </label>

          <label class="field">
            <span class="field__label">ุงุณู ุงูุจุฑูุงูุฌ</span>
            <input id="programNameDisplay" class="field__control" readonly />
            <span class="field__hint">ููุญุฏุฏ ุชููุงุฆููุง ูู ูุฑูุฒ ุงูุชูููุฉ</span>
          </label>
        </div>
      </div>

      <div class="section">
        <div class="section__title">ุจูุงูุงุช ููุฏู ุงูุทูุจ</div>

        <div class="grid2">
          <label class="field">
            <span class="field__label">ุงุณู ููุฏู ุงูุทูุจ</span>
            <input id="applicantName" class="field__control" placeholder="ูุซุงู: ู. ุนูู ุนุจุฏุงููู ุงูุนููุงู" />
          </label>

          <label class="field">
            <span class="field__label">ุงููุณูู ุงููุธููู</span>
            <input id="jobTitle" class="field__control" placeholder="ูุซุงู: ูุฏูุฑ ุฅุฏุงุฑุฉ ุงูุจุฑุงูุฌ ูุงููุดุงุฑูุน" />
          </label>
        </div>

        <label class="field">
          <span class="field__label">ุงูููุถูุน</span>
          <input id="subject" class="field__control" placeholder="ููููุฃ ุชููุงุฆููุง ููููู ุชุนุฏููู" />
        </label>

        <label class="field">
          <span class="field__label">ุชูุงุตูู ุงูุทูุจ</span>
          <textarea id="details" class="field__control field__control--textarea" rows="7" placeholder="ุงูุชุจ ุงูุชูุงุตูู ููุง..."></textarea>
        </label>
      </div>

      <div class="section" id="section-extra">
        <div class="section__title">ุจูุงูุงุช ุฅุถุงููุฉ</div>

        <!-- custody -->
        <div id="extra-custody" class="extra">
          <label class="field">
            <span class="field__label">ูุจูุบ ุงูุนูุฏุฉ ุงููุทููุจ (ุฑูุงู)</span>
            <input id="custodyAmount" class="field__control" inputmode="decimal" placeholder="5000" />
            <span class="field__hint">ุงูุญุฏ ุงูุฃุนูู ุงููุนุชูุฏ 5,000 ุฑูุงู ุณุนูุฏู</span>
          </label>
        </div>

        <!-- close custody -->
        <div id="extra-close" class="extra">
          <div class="grid2">
            <label class="field">
              <span class="field__label">ุงููุจูุบ ุงููุณุชุฎุฏู (ุฑูุงู)</span>
              <input id="usedAmount" class="field__control" inputmode="decimal" placeholder="0" />
            </label>

            <label class="field">
              <span class="field__label">ุงููุจูุบ ุงููุชุจูู (ุฑูุงู)</span>
              <input id="remainingAmount" class="field__control" inputmode="decimal" placeholder="0" />
            </label>
          </div>

          <label class="field">
            <span class="field__label">ุนุฏุฏ ุงููุดููุนุงุช</span>
            <input id="attachments" class="field__control" inputmode="numeric" placeholder="0" />
          </label>
        </div>

        <!-- general -->
        <div id="extra-general" class="extra">
          <label class="field">
            <span class="field__label">ุนุฏุฏ ุงููุดููุนุงุช (ุงุฎุชูุงุฑู)</span>
            <input id="attachmentsGeneral" class="field__control" inputmode="numeric" placeholder="0" />
          </label>
        </div>
      </div>

      <div class="section">
        <div class="section__title">ุงูุชูููุน</div>

        <div class="grid2">
          <label class="field">
            <span class="field__label">ุทุฑููุฉ ุงูุชูููุน</span>
            <select id="signatureMode" class="field__control">
              <option value="canvas">ุชูููุน ูุจุงุดุฑ (Canvas)</option>
              <option value="upload">ุฑูุน ุตูุฑุฉ ุงูุชูููุน</option>
            </select>
          </label>

          <label class="field" id="signatureUploadField" style="display:none;">
            <span class="field__label">ุฑูุน ุตูุฑุฉ ุงูุชูููุน</span>
            <input id="signatureFile" type="file" accept="image/*" class="field__control" />
          </label>
        </div>

        <div id="signatureCanvasWrap" class="signature-canvas-container">
          <canvas id="signatureCanvas" height="140" tabindex="0" aria-label="ููุญุฉ ุงูุชูููุน"></canvas>

          <div class="signature-toolbar">
            <div class="signature-toolbar-left">
              <div class="pen-controls">
                <div class="pen-control-group pen-size-control">
                  <span class="pen-control-label">ุณููู ุงูููู</span>
                  <input id="penSize" type="range" min="1" max="8" step="0.5" value="2" />
                  <span id="penSizeValue" class="pen-size-value">2px</span>
                </div>

                <div class="pen-control-group pen-color-control">
                  <span class="pen-control-label">ุงูููู</span>
                  <input id="penColor" type="color" value="#1d4ed8" />
                </div>
              </div>

              <button type="button" class="md3-icon-button-sm icon-undo" id="undoSignature" title="ุชุฑุงุฌุน"></button>
              <button type="button" class="md3-icon-button-sm icon-redo" id="redoSignature" title="ุฅุนุงุฏุฉ"></button>
            </div>

            <div class="signature-toolbar-right signature-actions">
              <button class="btn btn--ghost" id="clearSignature" type="button">ูุณุญ</button>
            </div>
          </div>

          <div class="signature-helper-text">
            <span>๐ก</span>
            <span>ุงุฑุณู ุงูุชูููุน ุฏุงุฎู ุงููุฑุจุนุ ูุณูุธูุฑ ูู ุงููุนุงููุฉ ูุจุงุดุฑุฉ.</span>
          </div>

          <div id="aria-live-region" class="sr-only" aria-live="polite"></div>
        </div>
      </div>

      <div class="section small-note">
        <div class="section__title">ููุงุญุธุฉ</div>
        <div class="muted">
          ููุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุฃุฌุฒุงุก ูู ุงููุงุฌูุฉ ูู PDF: ุงุณุชุฎุฏู ุฒุฑ <b>ุชุตุฏูุฑ PDF</b> ุฏุงุฎู ุงููููุน.
          ููุง ูุฏุนู ุงููููุน Ctrl/โ + P ุจุฏูู ุธููุฑ ุงููุงุฌูุฉ (ุจูุถู ุฅุนุฏุงุฏุงุช ุงูุทุจุงุนุฉ).
        </div>
      </div>
    </section>

    <!-- PREVIEW -->
    <section class="panel preview" aria-label="ุงููุนุงููุฉ">
      <div class="preview__header">
        <div>
          <div class="preview__title">ุงููุนุงููุฉ</div>
          <div class="preview__meta muted">ุชุญุฏูุซ ูุจุงุดุฑ โข A4</div>
        </div>

        <div class="preview__actions" aria-label="ุฃุฏูุงุช ุงููุนุงููุฉ">
          <button class="iconBtn" id="btn-zoomout" type="button" title="ุชุตุบูุฑ">โ</button>
          <button class="iconBtn" id="btn-zoomin" type="button" title="ุชูุจูุฑ">+</button>
          <button class="iconBtn" id="btn-zoomfit" type="button" title="ููุงุกูุฉ">ููุงุกูุฉ</button>
          <button class="btn btn--primary" id="btn-export2" type="button">ุชุตุฏูุฑ PDF</button>
        </div>
      </div>

      <div id="printRoot" class="printRoot" aria-label="ุตูุญุงุช ุงูุฎุทุงุจ"></div>

      <div id="mobilePreview" class="mobilePreview" aria-label="ูุนุงููุฉ ุงูุฌูุงู">
        <div class="viewerViewport" id="viewerViewport" aria-label="ุนุฑุถ ุงูุตูุญุฉ">
          <div class="viewerStage" id="viewerStage">
            <img id="viewerImg" alt="ูุนุงููุฉ ุงูุตูุญุฉ"/>
          </div>
          <div id="viewerLoading" class="viewerLoading" aria-live="polite" aria-label="ุฌุงุฑู ุชุญุฏูุซ ุงููุนุงููุฉ">
            <div class="spinner"></div>
            <div>ุฌุงุฑู ุชุญุฏูุซ ุงููุนุงููุฉโฆ</div>
          </div>
        </div>

        <div class="viewerPager" aria-label="ุงูุชููู ุจูู ุงูุตูุญุงุช">
          <button class="btn btn--ghost" id="viewerPrev" type="button">ุงูุณุงุจู</button>
          <div id="viewerIndicator" class="viewerIndicator">1 / 1</div>
          <button class="btn btn--ghost" id="viewerNext" type="button">ุงูุชุงูู</button>
        </div>

        <div class="viewerHint muted">
          ุงุณุญุจ ูููููุง/ูุณุงุฑูุง ููุชููู ุจูู ุงูุตูุญุงุช โข ูุฑูุจ/ุจุนูุฏ ุจุฅุตุจุนูู ููุชูุจูุฑ
        </div>
      </div>


      <div class="preview__footer muted">
        ุนูู ุงูุฌูุงู: ุงุณุชุฎุฏู ุฒุฑ <b>ุงููุนุงููุฉ</b> ุจุงูุฃุนูู ุซู <b>ุชุตุฏูุฑ PDF</b>.
      </div>
    </section>
  </main>

  <!-- Bottom navigation (mobile) -->
  <nav class="bottomTabs" role="tablist" aria-label="ุงูุชููู">
    <button class="tab is-active" data-view="form" type="button">ุงููุฏุฎูุงุช</button>
    <button class="tab" data-view="preview" type="button">ุงููุนุงููุฉ</button>
  </nav>

  <!-- PDF export libs (for iOS parity). Used by js/print.js. -->
  <!-- PDF export libs are loaded on-demand (see js/print.js) to improve reliability on iOS -->


  <script src="js/hijri-converter.js"></script>
  <script src="js/date-picker.js"></script>
  <script src="js/signature-enhanced.js"></script>
  <script src="js/theme.js"></script>

  <script src="js/utils.js"></script>
  <script src="js/templates.js"></script>
  <script src="js/pagination.js"></script>
  <script src="js/canvas-renderer.js"></script>
  <script src="js/print.js"></script>
  <script src="js/mobile-preview.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
